# TypeScript AST ËØ≠Ê≥ïÁªìÊûÑÂèÇËÄÉ (BNF)

Êú¨ÊñáÊ°£ÂÆö‰πâ‰∫ÜTypeScriptËØ≠Ê≥ïÁöÑBNFËØ≠Ê≥ïÔºå‰Ωú‰∏∫ArboresÁ±ªÂûãÂåñASTËäÇÁÇπËÆæËÆ°ÁöÑÂèÇËÄÉÊ†áÂáÜ„ÄÇ

> üìù **ËØ¥Êòé**: Ê≠§ÊñáÊ°£Êõø‰ª£‰∫ÜÂéüÊúâÁöÑtypescript-ast-reference.mdÔºåÊèê‰æõÊõ¥Á≥ªÁªüÂåñÁöÑËØ≠Ê≥ïÂÆö‰πâ„ÄÇ

## Âü∫Á°ÄÁ¨¶Âè∑

```bnf
// Â≠óÈù¢Èáè
<Identifier> ::= /[a-zA-Z_$][a-zA-Z0-9_$]*/
<StringLiteral> ::= '"' /[^"]*/ '"' | "'" /[^']*/ "'"
<NumericLiteral> ::= /[0-9]+(\.[0-9]+)?/
<BooleanLiteral> ::= "true" | "false"
<NullLiteral> ::= "null"
<UndefinedLiteral> ::= "undefined"

// Êìç‰ΩúÁ¨¶
<AssignmentOperator> ::= "=" | "+=" | "-=" | "*=" | "/=" | "%=" | "<<=" | ">>=" | ">>>=" | "&=" | "|=" | "^="
<BinaryOperator> ::= "+" | "-" | "*" | "/" | "%" | "==" | "!=" | "===" | "!==" | "<" | ">" | "<=" | ">=" | "&&" | "||" | "&" | "|" | "^" | "<<" | ">>" | ">>>"
<UnaryOperator> ::= "+" | "-" | "!" | "~" | "++" | "--" | "typeof" | "void" | "delete"
```

## Ê†∏ÂøÉËØ≠Ê≥ïÁªìÊûÑ

### 1. Ê∫êÊñá‰ª∂ÁªìÊûÑ

```bnf
<SourceFile> ::= <Statement>*

<Statement> ::= <ExpressionStatement>
              | <VariableStatement>
              | <FunctionDeclaration>
              | <ClassDeclaration>
              | <InterfaceDeclaration>
              | <TypeAliasDeclaration>
              | <EnumDeclaration>
              | <ImportDeclaration>
              | <ExportDeclaration>
              | <Block>
              | <IfStatement>
              | <WhileStatement>
              | <ForStatement>
              | <DoStatement>
              | <SwitchStatement>
              | <TryStatement>
              | <ThrowStatement>
              | <ReturnStatement>
              | <BreakStatement>
              | <ContinueStatement>
```

### 2. Â£∞ÊòéËØ≠Âè•

```bnf
<VariableStatement> ::= <VariableDeclarationList> ";"

<VariableDeclarationList> ::= ("const" | "let" | "var") <VariableDeclaration> ("," <VariableDeclaration>)*

<VariableDeclaration> ::= <Identifier> <TypeAnnotation>? <Initializer>?

<TypeAnnotation> ::= ":" <TypeNode>

<Initializer> ::= "=" <Expression>

<FunctionDeclaration> ::= "async"? "function" "*"? <Identifier> <TypeParameters>? <ParameterList> <TypeAnnotation>? <Block>

<ParameterList> ::= "(" <Parameter>? ("," <Parameter>)* ")"

<Parameter> ::= <Identifier> "?"? <TypeAnnotation>? <Initializer>?
              | <RestParameter>

<RestParameter> ::= "..." <Identifier> <TypeAnnotation>?
```

### 3. Á±ªÂíåÊé•Âè£

```bnf
<ClassDeclaration> ::= <Modifier>* "class" <Identifier> <TypeParameters>? <HeritageClause>? "{" <ClassElement>* "}"

<InterfaceDeclaration> ::= "interface" <Identifier> <TypeParameters>? <HeritageClause>? "{" <InterfaceElement>* "}"

<TypeAliasDeclaration> ::= "type" <Identifier> <TypeParameters>? "=" <TypeNode> ";"

<ClassElement> ::= <PropertyDeclaration>
                 | <MethodDeclaration>
                 | <GetAccessorDeclaration>
                 | <SetAccessorDeclaration>
                 | <ConstructorDeclaration>

<InterfaceElement> ::= <PropertySignature>
                     | <MethodSignature>
                     | <CallSignature>
                     | <ConstructSignature>
                     | <IndexSignature>

<Modifier> ::= "public" | "private" | "protected" | "static" | "readonly" | "abstract" | "async" | "export" | "default"
```

### 4. Ë°®ËææÂºè

```bnf
<Expression> ::= <AssignmentExpression>

<AssignmentExpression> ::= <ConditionalExpression>
                         | <LeftHandSideExpression> <AssignmentOperator> <AssignmentExpression>

<ConditionalExpression> ::= <LogicalOrExpression>
                          | <LogicalOrExpression> "?" <AssignmentExpression> ":" <AssignmentExpression>

<LogicalOrExpression> ::= <LogicalAndExpression>
                        | <LogicalOrExpression> "||" <LogicalAndExpression>

<LogicalAndExpression> ::= <BitwiseOrExpression>
                         | <LogicalAndExpression> "&&" <BitwiseOrExpression>

<BitwiseOrExpression> ::= <BitwiseXorExpression>
                        | <BitwiseOrExpression> "|" <BitwiseXorExpression>

<BitwiseXorExpression> ::= <BitwiseAndExpression>
                         | <BitwiseXorExpression> "^" <BitwiseAndExpression>

<BitwiseAndExpression> ::= <EqualityExpression>
                         | <BitwiseAndExpression> "&" <EqualityExpression>

<EqualityExpression> ::= <RelationalExpression>
                       | <EqualityExpression> ("==" | "!=" | "===" | "!==") <RelationalExpression>

<RelationalExpression> ::= <ShiftExpression>
                         | <RelationalExpression> ("<" | ">" | "<=" | ">=" | "instanceof" | "in") <ShiftExpression>

<ShiftExpression> ::= <AdditiveExpression>
                    | <ShiftExpression> ("<<" | ">>" | ">>>") <AdditiveExpression>

<AdditiveExpression> ::= <MultiplicativeExpression>
                       | <AdditiveExpression> ("+" | "-") <MultiplicativeExpression>

<MultiplicativeExpression> ::= <UnaryExpression>
                             | <MultiplicativeExpression> ("*" | "/" | "%") <UnaryExpression>

<UnaryExpression> ::= <PostfixExpression>
                    | <UnaryOperator> <UnaryExpression>
                    | "await" <UnaryExpression>

<PostfixExpression> ::= <LeftHandSideExpression>
                      | <LeftHandSideExpression> "++"
                      | <LeftHandSideExpression> "--"

<LeftHandSideExpression> ::= <NewExpression>
                           | <CallExpression>

<NewExpression> ::= <MemberExpression>
                  | "new" <NewExpression>

<CallExpression> ::= <MemberExpression> <Arguments>
                   | <CallExpression> <Arguments>
                   | <CallExpression> "[" <Expression> "]"
                   | <CallExpression> "." <Identifier>

<MemberExpression> ::= <PrimaryExpression>
                     | <MemberExpression> "[" <Expression> "]"
                     | <MemberExpression> "." <Identifier>
                     | "new" <MemberExpression> <Arguments>

<PrimaryExpression> ::= "this"
                      | <Identifier>
                      | <Literal>
                      | <ArrayLiteralExpression>
                      | <ObjectLiteralExpression>
                      | <FunctionExpression>
                      | <ArrowFunction>
                      | <ParenthesizedExpression>
```

### 5. Â≠óÈù¢ÈáèË°®ËææÂºè

```bnf
<ArrayLiteralExpression> ::= "[" <ElementList>? "]"

<ElementList> ::= <AssignmentExpression>? ("," <AssignmentExpression>?)*

<ObjectLiteralExpression> ::= "{" <PropertyAssignmentList>? "}"

<PropertyAssignmentList> ::= <PropertyAssignment> ("," <PropertyAssignment>)*

<PropertyAssignment> ::= <PropertyName> ":" <AssignmentExpression>
                       | <GetAccessor>
                       | <SetAccessor>
                       | <Identifier>

<PropertyName> ::= <Identifier>
                 | <StringLiteral>
                 | <NumericLiteral>
                 | <ComputedPropertyName>

<ComputedPropertyName> ::= "[" <AssignmentExpression> "]"
```

### 6. ÂáΩÊï∞ÂíåÁÆ≠Â§¥ÂáΩÊï∞

```bnf
<FunctionExpression> ::= "async"? "function" "*"? <Identifier>? <TypeParameters>? <ParameterList> <TypeAnnotation>? <Block>

<ArrowFunction> ::= "async"? <ArrowParameters> "=>" <ArrowBody>

<ArrowParameters> ::= <Identifier>
                    | <ParameterList>

<ArrowBody> ::= <AssignmentExpression>
              | <Block>
```

### 7. Á±ªÂûãÁ≥ªÁªü

```bnf
<TypeNode> ::= <PrimaryType>
             | <UnionType>
             | <IntersectionType>
             | <FunctionType>
             | <ConstructorType>
             | <ArrayType>
             | <TupleType>

<PrimaryType> ::= <Identifier>
                | <TypeReference>
                | <TypePredicate>
                | <TypeQuery>
                | <ThisType>
                | <LiteralType>
                | <ParenthesizedType>
                | <TypeLiteral>

<TypeReference> ::= <Identifier> <TypeArguments>?

<TypeArguments> ::= "<" <TypeNode> ("," <TypeNode>)* ">"

<UnionType> ::= <TypeNode> "|" <TypeNode>

<IntersectionType> ::= <TypeNode> "&" <TypeNode>

<ArrayType> ::= <TypeNode> "[" "]"

<TupleType> ::= "[" <TypeNode> ("," <TypeNode>)* "]"

<FunctionType> ::= <TypeParameters>? <ParameterList> "=>" <TypeNode>

<TypeLiteral> ::= "{" <TypeElement>* "}"

<TypeElement> ::= <PropertySignature>
                | <CallSignature>
                | <ConstructSignature>
                | <IndexSignature>
                | <MethodSignature>
```

### 8. ÊéßÂà∂ÊµÅËØ≠Âè•

```bnf
<IfStatement> ::= "if" "(" <Expression> ")" <Statement> ("else" <Statement>)?

<WhileStatement> ::= "while" "(" <Expression> ")" <Statement>

<ForStatement> ::= "for" "(" <ForInitializer>? ";" <Expression>? ";" <Expression>? ")" <Statement>
                 | "for" "(" <ForBinding> ("in" | "of") <Expression> ")" <Statement>

<DoStatement> ::= "do" <Statement> "while" "(" <Expression> ")" ";"

<SwitchStatement> ::= "switch" "(" <Expression> ")" "{" <CaseClause>* <DefaultClause>? <CaseClause>* "}"

<CaseClause> ::= "case" <Expression> ":" <Statement>*

<DefaultClause> ::= "default" ":" <Statement>*

<TryStatement> ::= "try" <Block> <CatchClause>? <FinallyClause>?

<CatchClause> ::= "catch" "(" <Identifier> <TypeAnnotation>? ")" <Block>

<FinallyClause> ::= "finally" <Block>
```

### 9. Ê®°ÂùóÁ≥ªÁªü

```bnf
<ImportDeclaration> ::= "import" <ImportClause> "from" <StringLiteral> ";"
                      | "import" <StringLiteral> ";"

<ImportClause> ::= <Identifier>
                 | <NamespaceImport>
                 | <NamedImports>
                 | <Identifier> "," <NamespaceImport>
                 | <Identifier> "," <NamedImports>

<NamespaceImport> ::= "*" "as" <Identifier>

<NamedImports> ::= "{" <ImportSpecifier> ("," <ImportSpecifier>)* "}"

<ImportSpecifier> ::= <Identifier>
                    | <Identifier> "as" <Identifier>

<ExportDeclaration> ::= "export" <ExportClause> "from" <StringLiteral> ";"
                      | "export" <ExportClause> ";"
                      | "export" "*" "from" <StringLiteral> ";"
                      | "export" "*" "as" <Identifier> "from" <StringLiteral> ";"
                      | "export" "=" <Expression> ";"

<ExportClause> ::= "{" <ExportSpecifier> ("," <ExportSpecifier>)* "}"

<ExportSpecifier> ::= <Identifier>
                    | <Identifier> "as" <Identifier>
```

## SyntaxKind Êò†Â∞ÑÂÖ≥Á≥ª

ÊØè‰∏™BNFËßÑÂàôÂØπÂ∫î‰∏Ä‰∏™ÊàñÂ§ö‰∏™TypeScript SyntaxKindÔºö

- `<SourceFile>` ‚Üí `SourceFile` (307)
- `<Identifier>` ‚Üí `Identifier` (80)
- `<StringLiteral>` ‚Üí `StringLiteral` (11)
- `<NumericLiteral>` ‚Üí `NumericLiteral` (9)
- `<FunctionDeclaration>` ‚Üí `FunctionDeclaration` (262)
- `<VariableDeclaration>` ‚Üí `VariableDeclaration` (260)
- `<ClassDeclaration>` ‚Üí `ClassDeclaration` (263)
- `<InterfaceDeclaration>` ‚Üí `InterfaceDeclaration` (264)
- `<TypeAliasDeclaration>` ‚Üí `TypeAliasDeclaration` (265)
- ... (ÂÖ±399‰∏™SyntaxKind)

## ÂÆûÁé∞Á≠ñÁï•

1. **‰ºòÂÖàÁ∫ßÊéíÂ∫è**ÔºöÊåâ‰ΩøÁî®È¢ëÁéáÂíåÈáçË¶ÅÊÄßÂÆûÁé∞
2. **Ê∏êËøõÂºèÂÆûÁé∞**ÔºöÊØè‰∏™ËäÇÁÇπÁ±ªÂûãÁã¨Á´ãÂÆûÁé∞ÂíåÊµãËØï
3. **RoundtripÈ™åËØÅ**ÔºöÁ°Æ‰øùÂèåÂêëËΩ¨Êç¢Êó†Êçü
4. **ÁâàÊú¨ÂêåÊ≠•**Ôºö‰∏éTypeScriptÁºñËØëÂô®ÁâàÊú¨‰øùÊåÅ‰∏ÄËá¥

## ÂèÇËÄÉËµÑÊñô

- [TypeScript Language Specification](https://github.com/microsoft/TypeScript/blob/main/doc/spec-ARCHIVED.md)
- [TypeScript Compiler API](https://github.com/microsoft/TypeScript/wiki/Using-the-Compiler-API)
- [TypeScript AST Viewer](https://ts-ast-viewer.com/)
